name: Build and Deploy Kripke
description: Build a Docker container and deploy it as a Kubernetes Job.
plan:
- agent: build
  context:
    environment: "google cloud CPU instance in Kubernetes"
    application: kripke
    load: true
    max_attempts: 10
    details: |
      Clone the latest branch of kripke. You will need to clone all submodules and use a newer version of cmake.
      Ensure that the kripke executable 'kripke.exe' is copied from the build directory to be on the PATH.

- agent: kubernetes-job
  context:
    no_pull: true
    environment: "google cloud CPU instance in Kubernetes"
    max_attempts: 10
    details: |
      Run the kripke executable 'kripke.exe', just the executable without mpi or arguments.
